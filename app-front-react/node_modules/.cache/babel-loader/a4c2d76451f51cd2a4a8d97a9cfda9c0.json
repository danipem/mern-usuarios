{"ast":null,"code":"var _jsxFileName = \"/home/dani/Desktop/FULLSTACK/react/MERN/app-front-react/src/componentes/ListarUsuarios.js\";\nimport React, { Component, useDebugValue } from 'react';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport EditarUsuario from \"./EditarUsuario\";\n\nclass ListarUsuarios extends\n/*React.*/\nComponent {\n  // equivalente al ngOnInit\n  constructor(props) {\n    super(props);\n    this.botonEliminar = this.botonEliminar.bind(this);\n    this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState(null);\n    let promesaHTTP = window.fetch(`http://127.0.0.1:4000/api/usuarios/`);\n    promesaHTTP.then(resHTTP => {\n      let promesaJSON = resHTTP.json();\n      promesaJSON.then(objColeccionUsu => {\n        console.log(JSON.stringify(objColeccionUsu)); // Cuando por fin recibimos la colección y ha sido convertida en JSON\n\n        this.setState({\n          listaUsuarios: objColeccionUsu\n        });\n      });\n    });\n  }\n\n  componentWillUnmount() {// Aquí se ejectua cuando se desmonte el componente\n  }\n\n  botonEliminar(evt) {\n    let usuId = evt.target.dataset.id;\n    console.log(usuId);\n    fetch(`http://127.0.0.1:4000/api/usuarios/${usuId}`, {\n      method: 'delete'\n    }).then(res => {\n      res.json().then(obj => {\n        if (obj.mensaje === 'OK') {\n          alert('El usuario se ha borrado con éxito');\n          this.componentDidMount();\n        } else {\n          alert('No se ha podido borrar el usuario');\n        }\n      });\n    });\n  }\n\n  botonEditar(e) {\n    let usuId = e.target.dataset.id;\n    let uNombre = e.target.dataset.nombre;\n    let uEmail = e.target.dataset.email;\n    let uEdad = e.target.dataset.edad;\n    console.log(usuId);\n    fetch(`http://127.0.0.1:4000/api/usuarios/${usuId}`, {\n      method: 'put',\n      body: JSON.stringify({\n        \"nombre\": uNombre,\n        \"email\": uEmail,\n        \"edad\": uEdad\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => alert('Bien modificado')).catch(vacas => \"MAL MAL MAL MAL MAL\");\n  } // Si this.state no existe, mostramos \"Cargando...\"\n\n\n  render() {\n    let clickEliminar = this.botonEliminar;\n    let objViDomJSX;\n\n    if (this.state === null) {\n      objViDomJSX = React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Cargando...\");\n    } else {\n      let filasTr = this.state.listaUsuarios.map(usu => {\n        let opcionEditar = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"Modificar datos\"), React.createElement(\"form\", {\n          onSubmit: this.botonEditar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"Nombre: \"), React.createElement(\"input\", {\n          type: \"text\",\n          placeholder: \"\",\n          value: this.state.nombre,\n          onChange: this.onChangeNombre,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"Email: \"), React.createElement(\"input\", {\n          type: \"email\",\n          placeholder: \"\",\n          value: this.state.email,\n          onChange: this.onChangeEmail,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \"Edad: \"), React.createElement(\"input\", {\n          type: \"text\",\n          placeholder: \"3\",\n          value: this.state.edad,\n          onChange: this.onChangeEdad,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Enviar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }))));\n        return React.createElement(\"tr\", {\n          key: usu._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, usu.nombre), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, usu.email), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, usu.edad), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: this.botonEditar,\n          \"data-id\": usu._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"Edit\"), React.createElement(\"button\", {\n          onClick: clickEliminar,\n          \"data-id\": usu._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, \"Borrar\")));\n      });\n      objViDomJSX = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Lista de usuarios\"), React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Nombre\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Edad\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, filasTr)));\n    }\n\n    return objViDomJSX;\n  }\n\n}\n\nexport default ListarUsuarios;","map":{"version":3,"sources":["/home/dani/Desktop/FULLSTACK/react/MERN/app-front-react/src/componentes/ListarUsuarios.js"],"names":["React","Component","useDebugValue","BrowserRouter","Router","Route","Link","EditarUsuario","ListarUsuarios","constructor","props","botonEliminar","bind","componentDidMount","setState","promesaHTTP","window","fetch","then","resHTTP","promesaJSON","json","objColeccionUsu","console","log","JSON","stringify","listaUsuarios","componentWillUnmount","evt","usuId","target","dataset","id","method","res","obj","mensaje","alert","botonEditar","e","uNombre","nombre","uEmail","email","uEdad","edad","body","headers","catch","vacas","render","clickEliminar","objViDomJSX","state","filasTr","map","usu","opcionEditar","onChangeNombre","onChangeEmail","onChangeEdad","_id"],"mappings":"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","sourcesContent":["import React, { Component, useDebugValue } from 'react'\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom'\nimport EditarUsuario from \"./EditarUsuario\";\n\n\nclass ListarUsuarios extends /*React.*/ Component{\n    // equivalente al ngOnInit\n\n    constructor(props){\n        super(props) \n\n\n        this.botonEliminar = this.botonEliminar.bind(this)\n        this.componentDidMount = this.componentDidMount.bind(this)\n    }\n\n    componentDidMount(){\n        this.setState (null);\n        let promesaHTTP = window.fetch(`http://127.0.0.1:4000/api/usuarios/`)\n        promesaHTTP.then((resHTTP)=>{    \n            let promesaJSON = resHTTP.json()\n            promesaJSON.then((objColeccionUsu)=>{\n                console.log(JSON.stringify(objColeccionUsu))\n                // Cuando por fin recibimos la colección y ha sido convertida en JSON\n                this.setState({\n                    listaUsuarios: objColeccionUsu\n                })\n            })\n        })\n    }\n\n    componentWillUnmount(){\n        // Aquí se ejectua cuando se desmonte el componente\n    }\n\n    botonEliminar(evt) {\n        let usuId = evt.target.dataset.id\n        console.log(usuId);\n\n        fetch(`http://127.0.0.1:4000/api/usuarios/${usuId}`, {\n            method: 'delete',\n\n        }).then((res) => {\n            res.json().then((obj) => {\n                if(obj.mensaje === 'OK'){\n                    alert('El usuario se ha borrado con éxito')\n                    this.componentDidMount();\n            } else {\n                alert('No se ha podido borrar el usuario')\n            }\n            })\n        })\n      }\n    botonEditar(e) {\n        let usuId = e.target.dataset.id\n        let uNombre = e.target.dataset.nombre\n        let uEmail = e.target.dataset.email\n        let uEdad = e.target.dataset.edad\n        console.log(usuId);\n        fetch(`http://127.0.0.1:4000/api/usuarios/${usuId}`, {\n            method: 'put',\n            body: JSON.stringify({\n                \"nombre\": uNombre,\n                \"email\": uEmail,\n                \"edad\": uEdad\n            }),\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        }).then((res)=> alert('Bien modificado')).catch((vacas)=> \"MAL MAL MAL MAL MAL\")\n      }\n    \n\n\n    // Si this.state no existe, mostramos \"Cargando...\"\n    render(){\n        let clickEliminar = this.botonEliminar\n        let objViDomJSX;\n        if(this.state === null){\n            objViDomJSX = (<p>Cargando...</p>)\n        } else{\n              \n            let filasTr = this.state.listaUsuarios.map((usu)=>{\n                \n                let opcionEditar = <div>\n                <h2>Modificar datos</h2>\n                <form onSubmit={ this.botonEditar }>\n                    <div>\n                        <label>Nombre: </label>\n                        <input type=\"text\" placeholder=\"\" \n                                value={ this.state.nombre } \n                                onChange={ this.onChangeNombre }/>\n                    </div>\n                    <div>\n                        <label>Email: </label>\n                        <input type=\"email\" placeholder=\"\" \n                                value={ this.state.email } \n                                onChange={ this.onChangeEmail }/>\n                    </div>\n                    <div>\n                        <label>Edad: </label>\n                        <input type=\"text\" placeholder=\"3\" \n                                value={ this.state.edad }\n                                onChange={ this.onChangeEdad }/>\n                    </div>\n                    <div>\n                        <input type=\"submit\" value=\"Enviar\"/>\n                    </div>\n                </form>\n            </div>\n                \n\n                return( <tr key={ usu._id }>\n                            <td>{usu.nombre}</td>\n                            <td>{usu.email}</td>\n                            <td>{ usu.edad }</td>\n                            {/*<td>{usu.password}</td>*/}\n                            {/*<td>{botonEditar}</td>*/}\n                            <td><button onClick={this.botonEditar} data-id={usu._id}>Edit</button>\n                                <button onClick= {clickEliminar} data-id= {usu._id}>Borrar</button>\n                            </td>\n                        </tr>)\n            })\n\n            objViDomJSX = (\n                <div>\n                    <h2>Lista de usuarios</h2>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>Nombre</th>\n                                <th>Email</th>\n                                <th>Edad</th>\n                                {/*<th>Password</th>*/}\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {filasTr}\n                        </tbody>\n                    </table>\n                </div>\n            )\n        }\n    \n        return objViDomJSX\n    }\n}\nexport default ListarUsuarios;"]},"metadata":{},"sourceType":"module"}